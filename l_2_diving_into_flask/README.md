# –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ Flask –∏ FastAPI
***
## 2. –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤–æ Flask
***
- ## [–≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö](app_01.py)
–ü–æ–ø—Ä–æ—Å–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥–∞—Ç—å –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.
```python
@app.route('/')
def index():
    return '–í–≤–µ–¥–∏ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ'


@app.route('/<path:file>/')
def get_file(file):
    print(file)
    return f'–í–∞—à —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤: {file}!'
```
–ê —Ç–µ–ø–µ—Ä—å –≤–º–µ—Å—Ç–æ –ø—É—Ç–∏, –ø–µ—Ä–µ–¥–∞–¥–∏–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:
```shell
http://127.0.0.1:5000/<script>alert("I am ha—Åker")</script>/
```
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω —Ç–µ–∫—Å—Ç –±–µ–∑ –ø—É—Ç–∏. –ò –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç js —Å–∫—Ä–∏–ø—Ç —Å
–≤—Å–ø–ª—ã–≤–∞—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ —Ö–∞–∫–µ—Ä–µ. –ê –≤–µ–¥—å –∫–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Ç–∞–∫–∏–º –±–µ–∑–æ–±–∏–¥–Ω—ã–º, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ.

–î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥.
–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `escape` –∏–∑ –º–æ–¥—É–ª—è `markupsafe`.
```python
from markupsafe import escape


@app.route('/<path:file>/')
def get_file(file):
    return f'–í–∞—à —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤: {escape(file)}!'
```
- ## [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è url –∞–¥—Ä–µ—Å–æ–≤](app_02.py)
–•–æ—Ä–æ—à–∏–π —Ç–æ–Ω - –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `url_for()`.
```python
@app.route('/test_url_for/<int:num>/')
def test_url(num):
    text = f'–í num –ª–µ–∂–∏—Ç {num}<br>'
    text += f'–§—É–Ω–∫—Ü–∏—è {url_for("test_url", num=42) = }<br>'
    text += f'–§—É–Ω–∫—Ü–∏—è {url_for("test_url", num=42, data="new_data") = }<br>'
    text += f'–§—É–Ω–∫—Ü–∏—è {url_for("test_url", num=42, data="new_data", pi=3.14515) = }<br>'
    return text
```
–ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:5000/test_url_for/7/` —É–≤–∏–¥–µ–º —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:
```pycon
–í num –ª–µ–∂–∏—Ç 7
–§—É–Ω–∫—Ü–∏—è url_for("test_url", num=42) = '/test_url_for/42/'
–§—É–Ω–∫—Ü–∏—è url_for("test_url", num=42, data="new_data") = '/test_url_for/42/?data=new_data'
–§—É–Ω–∫—Ü–∏—è url_for("test_url", num=42, data="new_data", pi=3.14515) = '/test_url_for/42/?data=new_data&pi=3.14515'
```
–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ —Ñ—É–Ω–∫—Ü–∏—è `url_for` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–º—è `view` —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ
–ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª—é—á–µ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π –∫–ª—é—á
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ URL –∞–¥—Ä–µ—Å–µ. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ –∞–¥—Ä–µ—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –∞–¥—Ä–µ—Å—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞, —Ç.–µ. –ø–æ—Å–ª–µ –∑–Ω–∞–∫–∞ –≤–æ–ø—Ä–æ—Å `‚Äú?‚Äù`
–∫–∞–∫ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª–æ–º `&`.

üî• –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, 
–∞ –Ω–µ —Å –∞–¥—Ä–µ—Å–æ–º –≤–Ω—É—Ç—Ä–∏ route. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω–∏—Ç 
–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ `url` –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–∞–≤–æ–∫. –í–µ–¥—å –∏–º–µ–Ω–∞ `view` —Ñ—É–Ω–∫—Ü–∏–π –æ—Å—Ç–∞–Ω—É—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏.

  - ### ***[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–∏ –∫ —Å—Ç–∞—Ç–∏–∫–µ](app_03.py)***
–û–¥–∏–Ω –∏–∑ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `url_for` —è–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–∏–µ –ø—É—Ç–∏
–∫ —Ñ–∞–π–ª–∞–º —Å—Ç–∞—Ç–∏–∫–∏ –≤–Ω—É—Ç—Ä–∏ —à–∞–±–ª–æ–Ω–æ–≤.
```python
@app.route('/about/')
def about():
    context = {
                'title': '–û–±–æ –º–Ω–µ',
                'name': '–•–∞—Ä–∏—Ç–æ–Ω',
                }
    return render_template('about.html', **context)
```
–†–∞–Ω–µ–µ –º—ã –≤—ã–≤–æ–¥–∏–ª–∏ [—Ç–∞–∫–æ–π —à–∞–±–ª–æ–Ω](templates/about.html)
```html
<!doctype html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/static/css/bootstrap.min.css">
        <title>{{ title }}</title>
    </head>
    <body>
        <h1 class="text-monospace">–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç {{ name }}</h1>
        <img src="/static/image/foto.jpg" alt="–ú–æ—ë —Ñ–æ—Ç–æ" width="300">
        <p class="text-body text-justify">Lorem ipsum dolor sit amet, consectetur adipisicing
        elit. Ad cupiditate doloribus ducimus nam provident quo similique! Accusantium
        aperiam fugit magnam quas reprehenderit sapiente temporibus voluptatum!</p>
        <p class="alert-dark">–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã &copy;</p>
        <script src="/static/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
```
–í –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ç–∞—Ç–∏–∫–∏ —Ç—É—Ç –ø—Ä–æ–ø–∏—Å–∞–Ω—ã —Å—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã `bootstrap`, –∞ —Ç–∞–∫–∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
–∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ `image`. –ò—Å–ø—Ä–∞–≤–∏–º —ç—Ç–∏ —Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ —à–∞–±–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—è `url_for`
```html
<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
```
```html
<img src="{{ url_for('static', filename='image/foto.jpg') }}" alt="–ú–æ—ë —Ñ–æ—Ç–æ" width="300">
```
```html
<script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
```
–ß—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å URL-–∞–¥—Ä–µ—Å–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∏–º—è 
`‚Äústatic‚Äù` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –∞ –ø–æ –∫–ª—é—á—É `filename` –ø–µ—Ä–µ–¥–∞—Ç—å –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –≤–Ω—É—Ç—Ä–∏ 
–∫–∞—Ç–∞–ª–æ–≥–∞ `static`.

üí° –ù–µ —Å—Ç–æ–∏—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å `view` —Ñ—É–Ω–∫—Ü–∏—é —Å –∏–º–µ–Ω–µ–º `static`.

üî• –í–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞ —Ä–∞–∑–¥–∞—á—É —Å—Ç–∞—Ç–∏–∫–∏ –æ—Ç–≤–µ—á–∞–µ—Ç Flask. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ 
—Å—Ç–∞—Ç–∏–∫—É —Ä–∞–∑–¥–∞—ë—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä, –∞ –Ω–µ `Flask`. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–¥–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç —Å–µ—Ä–≤–µ—Ä. –ò–∑–º–µ–Ω—è—Ç—å —à–∞–±–ª–æ–Ω—ã `Flask` 
–Ω–µ –Ω—É–∂–Ω–æ, `url_for` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—É—Ç–∏.

- ## –û–±—Ä–∞–±–æ—Ç–∫–∞ –ó–∞–ø—Ä–æ—Å–æ–≤
–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
–¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –∏–ª–∏ –¥–∞–∂–µ
–Ω–∞–±–æ—Ä—ã –±–∞–π—Ç ‚Äî —Ñ–∞–π–ª—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤.
  - ### ***[–û–±—Ä–∞–±–æ—Ç–∫–∞ GET –∑–∞–ø—Ä–æ—Å–æ–≤](app_04.py)***
–î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –º—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Å GET –∑–∞–ø—Ä–æ—Å–∞–º–∏. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
—Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ url –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ–ª—É—á–∞–ª–∏ –∏–∑ –Ω–∏—Ö –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ß–µ—Ä–µ–∑
–∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. –£ —Å–∞–º–æ–π —Å—Ç—Ä–æ–∫–∏ –µ—Å—Ç—å
–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –¥–ª–∏–Ω—É. –ê –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ª–∏–±–æ –∫–∞–∫ —á–∞—Å—Ç—å –∞–¥—Ä–µ—Å–∞, –ª–∏–±–æ –∫–∞–∫ –ø–∞—Ä–∞
–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–Ω–∞–∫–∞ –≤–æ–ø—Ä–æ—Å.

üî• –û–±—Ä–∞–±–æ—Ç–∫–∞ GET –∑–∞–ø—Ä–æ—Å–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.
```python
@app.route('/get/')
def get():
    if level := request.args.get('level'):
        text = f'–ü–æ—Ö–æ–∂–µ —Ç—ã –æ–ø—ã—Ç–Ω—ã–π –∏–≥—Ä–æ–∫, —Ä–∞–∑ –∏–º–µ–µ—à—å —É—Ä–æ–≤–µ–Ω—å {level}<br>'
    else:
        text = '–ü—Ä–∏–≤–µ—Ç, –Ω–æ–≤–∏—á–æ–∫.<br>'
    return text + f'{request.args}'
```
–í –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ `request` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `Flask`, –∫–æ—Ç–æ—Ä—ã–π
–¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞. `request` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ, 
–∫–æ—Ç–æ—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É —Å–µ—Ä–≤–µ—Ä–∞.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ —Å–ª–æ–≤–∞—Ä–µ `args` –æ–±—ä–µ–∫—Ç–∞ `request`. –ò —Ä–∞–∑
–ø–µ—Ä–µ–¥ –Ω–∞–º–∏ —Å–ª–æ–≤–∞—Ä—å, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–∏–≤—à–∏—Å—å –∫ –∫–ª—é—á—É —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `get()`.

–ü–µ—Ä–µ–π–¥—ë–º –ø–æ –∞–¥—Ä–µ—Å—É 
```html
http://127.0.0.1:5000/get/?name=alex&age=13&level=80
```
 –∏ —É–≤–∏–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:
```pycon
–ü–æ—Ö–æ–∂–µ —Ç—ã –æ–ø—ã—Ç–Ω—ã–π –∏–≥—Ä–æ–∫, —Ä–∞–∑ –∏–º–µ–µ—à—å —É—Ä–æ–≤–µ–Ω—å 80
ImmutableMultiDict([('name', 'alex'), ('age', '13'), ('level', '80')])
```

üî• –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `get` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ `request.args`.
–¢–∞–∫ –≤—ã –∏–∑–±–µ–∂–∏—Ç–µ –æ—à–∏–±–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª—é—á—É. –°—Ç—Ä–æ–∫—É
—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞ –æ–Ω –º–æ–∂–µ—Ç –Ω–µ –∑–Ω–∞—Ç—å –æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–∞—Ö.
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî –±–ª–æ–∫ `try` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `KeyError`.
  - ### ***[–û–±—Ä–∞–±–æ—Ç–∫–∞ POST –∑–∞–ø—Ä–æ—Å–æ–≤](app_05)***
`POST` –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –û–Ω–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç `GET` –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ, 
–ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ `POST` –∑–∞–ø—Ä–æ—Å–∞—Ö, –Ω–µ –≤–∏–¥–Ω—ã –≤ `URL`. –¢–∞–∫–∂–µ `POST` –∑–∞–ø—Ä–æ—Å—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, 
—á–µ–º `GET`.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ `POST` –∑–∞–ø—Ä–æ—Å–µ, –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `HTML` —Ñ–æ—Ä–º—É.
–£ —Ñ–æ—Ä–º—ã –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∞—Ç—Ä–∏–±—É—Ç `method="post"` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–º.

[–ü—Ä–∏–º–µ—Ä HTML —Ñ–æ—Ä–º—ã:](templates/form.html)
```html
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>–§–æ—Ä–º–∞ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–∞</title>
  </head>
  <body>
    <form action="/submit" method="post">
      <input type="text" name="name" placeholder="–ò–º—è">
      <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
    </form>
  </body>
</html>
```
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>–§–æ—Ä–º–∞ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–∞</title>
  </head>
  <body>
    <form action="/submit" method="post">
      <input type="text" name="name" placeholder="–ò–º—è">
      <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
    </form>
  </body>
</html>

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Å–æ–∑–¥–∞–µ–º `HTML-—Ñ–æ—Ä–º—É` —Å –ø–æ–ª–µ–º `name` –∏ –∫–Ω–æ–ø–∫–æ–π `submit`. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 
`POST-–∑–∞–ø—Ä–æ—Å` –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π `URL`, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `/submit`.
–í Python-–∫–æ–¥–µ —Ñ—É–Ω–∫—Ü–∏—è, –∞—Å—Å–æ—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å `URL` `/submit`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `request.form.get()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö,
–ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É.
```python
from flask import Flask, request, render_template

app = Flask(__name__)

@app.route('/submit', methods=['GET', 'POST'])
def submit():
    if request.method == 'POST':
        name = request.form.get('name')
        return f'Hello {name}!'
    return render_template('form.html')
  ```
–í –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ –ø–µ—Ä–µ–¥–∞—ë–º —Å–ø–∏—Å–æ–∫ `['GET', 'POST']` –ø–æ –∫–ª—é—á—É `methods`. –¢–µ–ø–µ—Ä—å `view` –≥–æ—Ç–æ–≤–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 
–∫–∞–∫ `get`, —Ç–∞–∫ –∏ `post` –∑–∞–ø—Ä–æ—Å—ã. –í–Ω—É—Ç—Ä–∏ –¥–µ–ª–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –º–µ—Ç–æ–¥–∞. –ï—Å–ª–∏ –±—ã–ª–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞, —Ñ—É–Ω–∫—Ü–∏—è `request.form.get()`
–∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É, –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é name. –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤
—Å–ª—É—á–∞–µ `get` –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç —à–∞–±–ª–æ–Ω —Å —Ñ–æ—Ä–º–æ–π –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.

üî• –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `get` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ `request.form`. –¢–∞–∫ –≤—ã –∏–∑–±–µ–∂–∏—Ç–µ –æ—à–∏–±–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É
–∫–ª—é—á—É. –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤—Å–µ –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ HTML —Ñ–æ—Ä–º–µ. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –±–ª–æ–∫ `try`
—Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `KeyError`.

`GET` –∏ `POST` –∑–∞–ø—Ä–æ—Å—ã –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. 
`GET` –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∞ `POST` ‚Äî —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å.
- ### ***[–ó–∞–º–µ–Ω–∞ route –Ω–∞ get post](app_06.py)***
–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ `submit` –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –∏–Ω–∞—á–µ:
```python
@app.get('/submit')
def submit_get():
    return render_template('form.html')


@app.post('/submit')
def submit_post():
    name = request.form.get('name')
    return f'Hello {name}!'
```
–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ `get` –∏ `post` –∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
–¥–≤–µ. –í –ø–µ—Ä–≤–æ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `get` –∏ –æ–Ω–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ñ–æ—Ä–º—ã.
–í—Ç–æ—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `post` —Å —Ç–µ–º –∂–µ —Å–∞–º—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, —á—Ç–æ –∏ —É `get`.
–í–Ω—É—Ç—Ä–∏ —á–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –º–µ—Ç–æ–¥–∞ –∑–∞–ø—Ä–æ—Å–∞.
  - ### ***[–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ POST –∑–∞–ø—Ä–æ—Å](app_07.py)***
–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é –º–Ω–æ–≥–∏—Ö
–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í `Flask`, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é
–º–æ–¥—É–ª—è `Flask` –∏ –æ–±—ä–µ–∫—Ç–∞ `request`. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä —Ç–∞–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

[–®–∞–±–ª–æ–Ω —Ñ–æ—Ä–º—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤](templates/upload.html)
```html
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <title>–§–æ—Ä–º–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞</title>
  </head>
  <body>
    <h1>–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä</h1>
    <form method=post enctype=multipart/form-data>
      <input type=file name=file>
      <input type=submit value=–ó–∞–≥—Ä—É–∑–∏—Ç—å>
    </form>
  </body>
</html>
```
<form method=post enctype=multipart/form-data>
  <input type=file name=file>
  <input type=submit value=–ó–∞–≥—Ä—É–∑–∏—Ç—å>
</form>

–ü–∞—Ä–∞–º–µ—Ç—Ä `enctype=multipart/form-data` —Å–æ–∑–¥–∞—ë—Ç —Ñ–æ—Ä–º—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–µ—Ä–≤–∞—è
—Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞—ë—Ç –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –ø–æ –∏–º–µ–Ω–∏ `file`.
–í—Ç–æ—Ä–∞—è ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
–ü—Ä–æ—Å—Ç–µ–π—à–∏–π –∫–æ–¥ `Flask` –¥–ª—è –ø—Ä–∏—ë–º–∞ —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º:
```python
from pathlib import PurePath, Path
from flask import Flask, request, render_template
from werkzeug.utils import secure_filename

app = Flask(__name__)


@app.route('/upload', methods=['GET', 'POST'])
def upload():
    if request.method == 'POST':
        file = request.files.get('file')
        file_name = secure_filename(file.filename)
        file.save(PurePath.joinpath(Path.cwd(), 'uploads', file_name))
        return f"–§–∞–π–ª {file_name} –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
    return render_template('upload.html')
```
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `upload` –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞.
–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π `Get` –∑–∞–ø—Ä–æ—Å –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —à–∞–±–ª–æ–Ω–∞ `upload.html`. –ï–≥–æ –º—ã
—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –≤—ã—à–µ.
–ü–æ–ª—É—á–∏–≤ `post` —Å —Ñ–∞–π–ª–æ–º, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `file`. –í —ç—Ç–æ –≤—Ä–µ–º—è –ø—Ä–∏—Å–ª–∞–Ω–Ω—ã–π
–Ω–∞–±–æ—Ä –±–∞–π—Ç –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏–ª–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ, –µ—Å–ª–∏
—Ñ–∞–π–ª –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–ª–æ—Ö–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º
—Ñ—É–Ω–∫—Ü–∏—é `secure_filename` –∏–∑ –º–æ–¥—É–ª—è `werkzeug.utils`.

üí° –§—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É, –µ—Å–ª–∏ –∏–º—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ
—Ñ–∞–π–ª–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–∞–Ω–Ω–æ–π –û–°.

–£ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `file`) –µ—Å—Ç—å –º–µ—Ç–æ–¥ `save`. –ü–µ—Ä–µ–¥–∞–≤ –≤ –Ω–µ–≥–æ –ø—É—Ç—å,
–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏—Å–ª–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

üî• –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Flask` –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏
–Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –≠—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é
–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è –º–µ–∂—Å–µ—Ç–µ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–∞.
- ## –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - ### ***–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫***
–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à—ë–ª –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É? –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ
–Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å, –ø–æ–ª—É—á–∏–º —Å–ª–µ–¥—É—é—â–∏–π –≤—ã–≤–æ–¥:
```pycon
Not Found
The requested URL was not found on the server. If you entered the URL manually
please check your spelling and try again.
```
- #### ***[–î–µ–∫–æ—Ä–∞—Ç–æ—Ä errorhandler](app_08.py)***
`Flask` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ —Å–ø–æ—Å–æ–±–µ–Ω –∑–∞–º–µ–Ω–∏—Ç—å
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–∏–º–ø–∞—Ç–∏—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ —Å—Ç–∏–ª–µ –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞.
–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `Flask` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø–æ–º–æ—â—å—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `errorhandler()`. –≠—Ç–æ—Ç
–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç
–≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤ —Å–ª—É—á–∞–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É `404 (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞)`, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —ç—Ç–æ–π –æ—à–∏–±–∫–∏:
```python
import logging
from flask import Flask, render_template, request

app = Flask(__name__)

logger = logging.getLogger(__name__)


@app.route('/')
def index():
    return '<h1>Hello world!</h1>'


@app.errorhandler(404)
def page_not_found(e):
    logger.warning(e)
    context = {
        'title': '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
        'url': request.base_url,
    }
    return render_template('404.html', **context), 404
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é `page_not_found()`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç
–≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ `404`. –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —à–∞–±–ª–æ–Ω HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã `404` –∏
–∫–æ–¥ –æ—à–∏–±–∫–∏ `404`. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `e` –ø–æ–ø–∞–¥–∞–µ—Ç —Ç–µ–∫—Å—Ç —Ç–æ–π —Å–∞–º–æ–π
–æ—à–∏–±–∫–∏ –æ `‚ÄúNot Found‚Ä¶‚Äù`. –ï—ë –º—ã –≤—ã–≤–æ–¥–∏–º –≤ –ª–æ–≥–∏ –∫–∞–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.
–í –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –≤ —à–∞–±–ª–æ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∞–¥—Ä–µ—Å, –ø–æ
–∫–æ—Ç–æ—Ä–æ–º—É –ø—ã—Ç–∞–ª—Å—è –ø–µ—Ä–µ–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –°–≤–æ–π—Å—Ç–≤–æ `base_url` —É –æ–±—ä–µ–∫—Ç–∞ `request`
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞.
–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —à–∞–±–ª–æ–Ω–∞, –≤–æ–∑—å–º—ë–º –±–∞–∑–æ–≤—ã–π –∏–∑ –ø—Ä–æ—à–ª–æ–π –ª–µ–∫—Ü–∏–∏.
[–®–∞–±–ª–æ–Ω base.html](templates/base.html)
```html
<!doctype html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="/static/css/bootstrap.min.css">
        <title>
            {% block title %}
                –ú–æ–π —Å–∞–π—Ç
            {% endblock %}
        </title>
    </head>
    <body>
        <div class="container-fluid">
            <ul class="nav nav-pills justify-content-end align-items-end">
                <li class="nav-item"><a href="/main/" class="nav-link">–û—Å–Ω–æ–≤–Ω–∞—è</a></li>
                <li class="nav-item"><a href="/data/" class="nav-link">–î–∞–Ω–Ω—ã–µ</a></li>
            </ul>
            {% block content %}
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
            {% endblock %}
            <div class="row fixed-bottom modal-footer">
                <hr>
                <p>–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã &copy;</p>
            </div>
        </div>
        <script src="/static/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
```
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ [—à–∞–±–ª–æ–Ω –¥–ª—è –æ—à–∏–±–∫–∏ `404`](templates/404.html) –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–∞–∫:
```html
{% extends 'base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
<div class="row">
    <p class="col-12">–ú—ã –Ω–µ –Ω–∞—à–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É: &laquo;{{ url }}&raquo;.<br>
    <a href="{{ url_for('index') }}">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </p>
</div>
{% endblock %}
```
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∞–¥—Ä–µ—Å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–∫–∞–∑–∞–Ω –Ω–µ —è–≤–Ω–æ, –∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
—á–µ—Ä–µ–∑ `url_for`. –ü–æ–¥–æ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.
- #### ***[–§—É–Ω–∫—Ü–∏—è abort](app_09.py)***
–§—É–Ω–∫—Ü–∏—è `abort()` —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ `Flask`. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç
–≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–π –∫–æ–¥ –æ—à–∏–±–∫–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É `404` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`,
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `abort()`:
```python
import logging
from flask import Flask, render_template, request, abort
from l_2_diving_into_flask.db import get_blog

app = Flask(__name__)

logger = logging.getLogger(__name__)


@app.route('/')
def index():
    return '<h1>Hello world!</h1>'


@app.route('/blog/<int:id>')
def get_blog_by_id(id):
    # –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –≤ –ë–î –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å—Ç–∞—Ç—å–∏ –ø–æ id
    result = get_blog(id)
    if result is None:
        abort(404)


# –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤ –ë–î —Å—Ç–∞—Ç—å—é
@app.errorhandler(404)
def page_not_found(e):
    logger.warning(e)
    context = {
        'title': '–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞',
        'url': request.base_url,
    }
    return render_template('404.html', **context), 404


if __name__ == '__main__':
    app.run(debug=True)

```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `abort()` –≤–Ω—É—Ç—Ä–∏ `get_blog_by_id` –¥–ª—è –≤—ã–∑–æ–≤–∞
–æ—à–∏–±–∫–∏ `404` –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å—Ç–∞—Ç—å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

üí° –ß—Ç–æ–±—ã –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫, –Ω–∞–ø–∏—Å–∞–Ω–∞ —Å–ª–µ–¥—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≥–ª—É—à–∫–∞:
```python
def get_blog(id):
    return None
```
- #### ***[–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫](app_10.py)***
> **400**: –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å    
**401**: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω  
**403**: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω  
**404**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞  
**500**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ ("–£ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫—Ä–∏–≤—ã–µ —Ä—É–∫–∏")

–ò–Ω–æ–≥–¥–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É `500`. –í –∏–¥–µ–∞–ª—å–Ω–æ–º
–º–∏—Ä–µ –∫–æ–¥ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –Ω–µ –æ—Ç–¥–∞—ë—Ç –æ—à–∏–±–∫—É `500`. –ù–æ
–ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–¥—Å—Ç–µ–ª–∏—Ç—å —Å–æ–ª–æ–º–∫–∏.
–£–¥–∞–ª–∏–º —Ñ—É–Ω–∫—Ü–∏–∏ `get_blog` –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ. –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ `id`
–ø–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
```pycon
Internal Server Error
The server encountered an internal error and was unable to complete your request.
Either the server is overloaded or there is an error in the application.
```
üî• –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏, –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞
—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–∫–∏, –∞ –Ω–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
debug=False

–í –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –Ω–∞–ø–∏—à–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å—Ç–∏–ª–µ –ø—Ä–æ–µ–∫—Ç–∞.
```python
@app.errorhandler(500)
def page_not_found(e):
    logger.error(e)
    context = {
                'title': '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞',
                'url': request.base_url,
                }
    return render_template('500.html', **context), 500
```
–ü–æ —Å—É—Ç–∏ –≤–∑—è–ª–∏ –∑–∞ –æ—Å–Ω–æ–≤—É –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–∫–∏ `404`, –Ω–æ –ª–æ–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –Ω–µ
–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –∞ –æ—à–∏–±–∫—É. –ü–ª—é—Å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω, –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–¥–∞ `500` –∫–ª–∏–µ–Ω—Ç—É.

[–®–∞–±–ª–æ–Ω `500` –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:](templates/500.html)
```html
{% extends 'base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
    <div class="row alert alert-danger">
        <p class="col-12">–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ú—ã —É–∂–µ –∑–Ω–∞–µ–º –∏ –∑–∞–Ω–∏–º–∞–µ–º—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏.<br>
        <a href="{{ url }}">–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç</a>
        </p>
    </div>
{% endblock %}
```
  - ### ***[–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è](app_11.py)***
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `Framework Flask` –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å
–æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–∞ –¥—Ä—É–≥—É—é. 

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã 
–∏–ª–∏ –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫
–∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–î–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `Flask` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `redirect()`. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç
URL-–∞–¥—Ä–µ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç
–æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å.

–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–∞–π—Ç–∞, –º–æ–∂–Ω–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```python
from flask import Flask, redirect, url_for

app = Flask(__name__)


@app.route('/')
def index():
    return '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!'


@app.route('/redirect/')
def redirect_to_index():
    return redirect(url_for('index'))
    
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–≤–∞ –º–∞—Ä—à—Ä—É—Ç–∞: `/` –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ `/redirect`
–¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É. –§—É–Ω–∫—Ü–∏—è `redirect_to_index()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
—Ñ—É–Ω–∫—Ü–∏—é `redirect()` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å
–ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `url_for()`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL-–∞–¥—Ä–µ—Å –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
–º–∞—Ä—à—Ä—É—Ç–∞.

–ó–¥–µ—Å—å: `return redirect(url_for('index'))` `index` - –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ `index()`

–§—É–Ω–∫—Ü–∏—è `redirect()` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–Ω–∞ –≤–Ω–µ—à–Ω–∏–π URL-–∞–¥—Ä–µ—Å. –ù–∞–ø—Ä–∏–º–µ—Ä:
```python
@app.route('/external')
def external_redirect():
    return redirect('https://google.com')
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `redirect()` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≤–Ω–µ—à–Ω–∏–π URL-–∞–¥—Ä–µ—Å https://google.com.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤ `Flask` –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å
–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL-–∞–¥—Ä–µ—Å –ø—Ä–∏
–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```python
@app.route('/hello/<name>')
def hello(name):
    return f'–ü—Ä–∏–≤–µ—Ç, {name}!'


@app.route('/redirect/<name>')
def redirect_to_hello(name):
    return redirect(url_for('hello', name=name))
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç `/hello/<name>`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç
–ø–∞—Ä–∞–º–µ—Ç—Ä `name`, –∏ –º–∞—Ä—à—Ä—É—Ç `/redirect/<name>`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é
`redirect()` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –º–∞—Ä—à—Ä—É—Ç `/hello/<name>` —Å
–ø–µ—Ä–µ–¥–∞—á–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `name`. –§—É–Ω–∫—Ü–∏—è `url_for()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL-–∞–¥—Ä–µ—Å –¥–ª—è
—É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
  - ### ***[Flash —Å–æ–æ–±—â–µ–Ω–∏—è](app_12.py)***
`Flash` —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `Flask` —è–≤–ª—è—é—Ç—Å—è —Å–ø–æ—Å–æ–±–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏. 

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ 
–æ–± –æ—à–∏–±–∫–∞—Ö –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å `flash` —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `flash()`. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç
—Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –∫ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è, –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:
```python
from flask import Flask, flash, redirect, render_template, request, url_for

app = Flask(__name__)

app.secret_key = b'5f214cacbd30c2ae4784b520f17912ae0d5d8c16ae98128e3f549546221265e4'

@app.route('/form', methods=['GET', 'POST'])
def form():
    if request.method == 'POST':
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
        flash('–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!', 'success')
        return redirect(url_for('form'))
    return render_template('form.html')
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞—Ä—à—Ä—É—Ç `/form` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
—Ñ–æ—Ä–º—ã. –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ `POST`, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã –∏
–≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `flash()` –∏
–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ `success`. –ó–∞—Ç–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ñ–æ—Ä–º–æ–π —Å
–ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `redirect()`.
- #### –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á***
–ß—Ç–æ–±—ã –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–µ—Å—Å–∏–µ–π –æ—à–∏–±–∫–∏ –≤–∏–¥–∞
```pycon
RuntimeError: The session is unavailable because no secret key
was set. Set the secret_key on the application to something
unique and secret.
```
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `Flask` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á.
–ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Å–ø–æ—Å–æ–± –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∞–∫–æ–≥–æ –∫–ª—é—á–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä—É —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
```pycon
>>> import secrets
>>> secrets.token_hex()
```
–°—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∫–ª—é—á–∞
—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –±–∞–π—Ç. –¢–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å
—Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
- #### ***[–®–∞–±–ª–æ–Ω –¥–ª—è flash —Å–æ–æ–±—â–µ–Ω–∏–π](templates/flash_form.html)***
–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ flash —Å–æ–æ–±—â–µ–Ω–∏—è –≤ HTML —à–∞–±–ª–æ–Ω–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π
–∫–æ–¥ —à–∞–±–ª–æ–Ω–∞:
```html
{% extends 'base.html' %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
    <form action="/form" method="post">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        <input type="text" name="name" placeholder="–ò–º—è">
        <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
    </form>
{% endblock %}
```
–≠—Ç–æ—Ç –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `get_flashed_messages()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö `flash`
—Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (–±–ª–æ–∫ with). 

–î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ `flash`. –ï—Å–ª–∏ –¥–∞, –≤ —Ü–∏–∫–ª–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç 
–ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç.–∫. —É–∫–∞–∑–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `with_categories=true`. –î–∞–ª–µ–µ –∏—Ö –≤—ã–≤–æ–¥ –≤
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–ª–æ–∫–∞—Ö —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Å—Ç–∏–ª–µ–π `bootstrap`.
- #### ***–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ flash —Å–æ–æ–±—â–µ–Ω–∏–π***
–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ `flash` –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö
–ø–æ-—Ä–∞–∑–Ω–æ–º—É. –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `message`. –ù–æ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –º–æ–∂–Ω–æ
–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏ –¥—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `warning`, `success` –∏ –¥—Ä—É–≥–∏–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏:
```python
@app.route('/form/', methods=['GET', 'POST'])
def form():
    if request.method == 'POST':
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
        if not request.form['name']:
            flash('–í–≤–µ–¥–∏—Ç–µ –∏–º—è!', 'danger')
            return redirect(url_for('form'))
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
        flash('–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!', 'success')
        return redirect(url_for('form'))
    return render_template('flash_form.html')
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏–º–µ–Ω–∏. –ï—Å–ª–∏ –∏–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è
—Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π `danger` –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞
—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ñ–æ—Ä–º–æ–π. –°–∞–º–∞ —Ñ–æ—Ä–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

`Flash` —Å–æ–æ–±—â–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É
–∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ `Flask`. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ —É–ø—Ä–æ—â–∞—é—Ç
–æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
- ## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - ### ***[–†–∞–±–æ—Ç–∞ —Å cookie —Ñ–∞–π–ª–∞–º–∏ –≤–æ Flask](app_13.py)***
`Cookie —Ñ–∞–π–ª—ã` ‚Äî —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –µ–≥–æ
–ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –Ω–∞ —Å–∞–π—Ç–µ. 

–í `Flask`, —Ä–∞–±–æ—Ç–∞ —Å `cookie` —Ñ–∞–π–ª–∞–º–∏ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é —Å–∞–º–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞,
–±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å `cookie` —Ñ–∞–π–ª–∞–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å `Flask` –∏ –æ–±—ä–µ–∫—Ç
`request`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ `cookie` —Ñ–∞–π–ª–∞–º. 
```python
from flask import Flask, request, make_response

app = Flask(__name__)


@app.route('/')
def index():
    # —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º cookie
    response = make_response("Cookie —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    response.set_cookie('username', 'admin')
    return response


@app.route('/getcookie/')
def get_cookies():
    # –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ cookie
    name = request.cookies.get('username')
    return f"–ó–Ω–∞—á–µ–Ω–∏–µ cookie: {name}"

```
–ú—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `cookie` —Ñ–∞–π–ª–∞ —Å –∫–ª—é—á–æ–º `username` –∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º
`admin` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `index()`. –ó–∞—Ç–µ–º –º—ã –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ `cookie` —Ñ–∞–π–ª–∞ —Å –∫–ª—é—á–æ–º
`username` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `get_cookies()` –∏ –≤—ã–≤–æ–¥–∏–º –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω.
- #### ***[–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞](app_14.py)***
–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ –æ —Ñ—É–Ω–∫—Ü–∏–∏ `make_response()`. –í–æ –≤—Å–µ—Ö –ø—Ä–æ—à–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –º—ã
–≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –∏–∑ `view` —Ñ—É–Ω–∫—Ü–∏–π –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç, —Ç–µ–∫—Å—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–∫ HTML,
–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ `render_template` –∏ –¥–∞–∂–µ –∑–∞–ø—Ä–æ—Å—ã
–ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ñ—É–Ω–∫—Ü–∏—è–º `redirect` –∏ `url_for`. –ö–∞–∂–¥—ã–π —Ä–∞–∑ `Flask` –Ω–µ—è–≤–Ω–æ
—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª –æ–±—ä–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞ - `response`. –ï—Å–ª–∏ –∂–µ –º—ã —Ö–æ—Ç–∏–º –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç,
–º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `make_response`.

–ò–∑–º–µ–Ω–∏–º –ø—Ä–æ—à–ª—ã–π –ø—Ä–∏–º–µ—Ä. –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º —à–∞–±–ª–æ–Ω `main.html`
```html
{% extends 'base.html' %}

{% block title %}
  {{ super() }} - {{ title }}
{% endblock %}

{% block content %}
  <div class="row">
    <h1 class="col-12 col-md-6 display-2">–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç {{ name }}</h1>
    <img src="/static/image/foto.jpg" class="col-12 col-md-6 img-fluid rounded-circle" alt="–ú–æ—ë —Ñ–æ—Ç–æ">
  </div>
{% endblock %}
```
–®–∞–±–ª–æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –æ–Ω —Ä–∞—Å—à–∏—Ä—è–µ—Ç
–±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω. –ù–∏—á–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∏ –Ω–∏–∫–∞–∫–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π ‚Äú–ø–µ—á–µ–Ω–µ–∫‚Äù.

–ê —Ç–µ–ø–µ—Ä—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
```python
from flask import Flask, request, make_response, render_template


@app.route('/')
def index():
    context = {
            'title': '–ì–ª–∞–≤–Ω–∞—è',
            'name': '–•–∞—Ä–∏—Ç–æ–Ω'
            }
    response = make_response(render_template('main.html', **context))
    response.headers['new_head'] = 'New value'
    response.set_cookie('username', context['name'])
    return response
```
–ò—Å–ø–æ–ª—å–∑—É—è `render_template` –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —à–∞–±–ª–æ–Ω, –Ω–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ,
–∞ –ø–µ—Ä–µ–¥–∞—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é `make_response`. –û—Ç–≤–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω, –Ω–æ –º—ã –º–æ–∂–µ–º
–≤–Ω–µ—Å—Ç–∏ –≤ –Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏
–ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∫—É–∫–∏ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

üî• –ù–µ –ø—É—Ç–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–ª–æ–∫–∞ head –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞.
  - ### ***[–°–µ—Å—Å–∏–∏](app_15.py)***
–°–µ—Å—Å–∏–∏ –≤ `Flask` —è–≤–ª—è—é—Ç—Å—è —Å–ø–æ—Å–æ–±–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏. –≠—Ç–æ –º–æ–∂–µ—Ç
–±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ—Å–ª–µ
–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏ –≤ `Flask` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `session`. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π
—Å–ª–æ–≤–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –ü–æ —Å—É—Ç–∏ —Å–µ—Å—Å–∏—è
‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è `cookies` —Ñ–∞–π–ª–æ–≤.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. [–ù–∞—á–Ω—ë–º —Å
—à–∞–±–ª–æ–Ω–∞](templates/username_form.html)
```html
{% extends 'base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block content %}
  <form method="post">
    <input type="text" name="username" placeholder="–ò–º—è">
    <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
  </form>
{% endblock %}
```
  <form method="post">
    <input type="text" name="username" placeholder="–ò–º—è">
    <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
  </form>
–ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `username` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ê —Ç–µ–ø–µ—Ä—å –∫–æ–¥ Flask:

```python
from flask import Flask, request, make_response, render_template, session, redirect, url_for


app = Flask(__name__)

app.secret_key = '5f214cacbd30c2ae4784b520f17912ae0d5d8c16ae98128e3f549546221265e4'


@app.route('/')
def index():
    if 'username' in session:
        return f'–ü—Ä–∏–≤–µ—Ç, {session["username"]}'
    else:
        return redirect(url_for('login'))
    
    
@app.route('/login/', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        session['username'] = request.form.get('username') or 'NoName'
        return redirect(url_for('index'))
    return render_template('username_form.html')


@app.route('/logout/')
def logout():
    session.pop('username', None)
    return redirect(url_for('index'))
```
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏ –≤ `Flask` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á `(secret_key)`.
–û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Å—Å–∏–∏ –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏
—Å–ª–æ–∂–Ω—ã–º. 

–î–∞–ª–µ–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç—Ä–∏ –º–∞—Ä—à—Ä—É—Ç–∞:

- `/` –¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/login` –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `/logout` –¥–ª—è –≤—ã—Ö–æ–¥–∞.

–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/login` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤
—Å–µ—Å—Å–∏—é. –ï—Å–ª–∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –≤ —Å–µ—Å—Å–∏–∏, —Ç–æ –æ–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/`.

–°–µ—Å—Å–∏–∏ –≤ Flask –∏–º–µ—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π

- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Å—Å–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 31 –¥–µ–Ω—å, –Ω–æ –µ–≥–æ –º–æ–∂–Ω–æ
–∏–∑–º–µ–Ω–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `app.permanent_session_lifetime`. –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è
–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ –æ–±—ä–µ–∫—Ç `timedelta`.
- –î–∞–Ω–Ω—ã–µ –≤ —Å–µ—Å—Å–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å
–∏–∑–º–µ–Ω–µ–Ω—ã –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–º.
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∏ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –≤
—Å–µ—Å—Å–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Å–µ—Å—Å–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
`HTTPS` –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `app.session_cookie_secure=True`.
–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–µ—Å—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `logout`. –í–Ω—É—Ç—Ä–∏ –Ω–µ—ë –≤—ã–∑—ã–≤–∞–µ–º
`session.pop()` —Å –∏–º–µ–Ω–µ–º —É–¥–∞–ª—è–µ–º–æ–≥–æ –∫–ª—é—á–∞: `session.pop('username', None)`.

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É `username` –∏–∑ —Å–µ—Å—Å–∏–∏. –ï—Å–ª–∏
–∫–ª—é—á–∞ –Ω–µ—Ç –≤ —Å–µ—Å—Å–∏–∏, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É.

–°–µ—Å—Å–∏–∏ `Flask` –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç
–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
